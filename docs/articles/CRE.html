<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CRE">
<title>CRE • CRE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CRE">
<meta property="og:description" content="CRE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CRE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/CRE.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Users</h6>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developers</h6>
    <a class="dropdown-item" href="../articles/Contribution.html">Contribution</a>
    <a class="dropdown-item" href="../articles/Testing-the-Package.html">Testing the CRE Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="https://github.com/fasrc/CRE/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CRE</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/fasrc/CRE/blob/HEAD/vignettes/CRE.Rmd"><code>vignettes/CRE.Rmd</code></a></small>
      <div class="d-none name"><code>CRE.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the CRE package properly, you first must install the <a href="https://github.com/JingyuHe/XBART" class="external-link">XBART</a> and <a href="https://github.com/socket778/XBCF" class="external-link">XBCF</a> packages:</p>
<div class="section level4">
<h4 id="how-to-install-the-xbart-package-linux">How to install the <a href="https://github.com/JingyuHe/XBART" class="external-link">XBART</a> package (linux):<a class="anchor" aria-label="anchor" href="#how-to-install-the-xbart-package-linux"></a>
</h4>
<p>In your terminal, install necessary packages via <a href="https://brew.sh/" class="external-link">homebrew</a>:</p>
<pre><code>~ $ brew install gfortran
~ $ brew install llvm boost libomp</code></pre>
<p>Find the path to LDFLAGS by running <code>brew info llvm</code> (see
example): For compilers to find llvm you may need to set:</p>
<pre><code>~ $ export LDFLAGS="-L/usr/local/opt/llvm/lib"</code></pre>
<p>Run the following two commands and take note of their output:</p>
<pre><code>~ $ which clang
~ $ which clang++</code></pre>
<p>Run the following in your terminal under your user directory:</p>
<pre><code>~ $ mkdir ~/.R # if it doesn’t already exist
~ $ cd .R
.R $ touch Makevars
.R $ open -e Makevars</code></pre>
<p>Copy the following into the text editor, replacing
<code>/path/to/_</code> with the paths found above:</p>
<pre><code>CC=/path/to/clang
CXX=/path/to/clang++
CXX11=/path/to/clang++
CXX14=/path/to/clang++
CXX17=/path/to/clang++
CXX1X=/path/to/clang++
LDFLAGS=path/to/LDFLAGS -o task -fopenmp</code></pre>
<p>Example Makevars file:</p>
<pre><code>CC=/usr/local/opt/llvm/bin/clang
CXX=/usr/local/opt/llvm/bin/clang++
CXX11=/usr/local/opt/llvm/bin/clang++ 
CXX14=/usr/local/opt/llvm/bin/clang++ 
CXX17=/usr/local/opt/llvm/bin/clang++ 
CXX1X=/usr/local/opt/llvm/bin/clang++ 
LDFLAGS=-L/usr/local/opt/llvm/lib -o task -fopenmp</code></pre>
<p>Then in R, run:</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span></code></pre>
<pre><code><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"JingyuHe/XBART"</span><span class="op">)</span></code></pre>
</div>
<div class="section level4">
<h4 id="how-to-install-the-xbcf-package">How to install the <a href="https://github.com/socket778/XBCF" class="external-link">XBCF</a> package:<a class="anchor" aria-label="anchor" href="#how-to-install-the-xbcf-package"></a>
</h4>
<p>In R, run:</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></code></pre>
<pre><code><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"socket778/XBCF"</span><span class="op">)</span></code></pre>
</div>
<div class="section level4">
<h4 id="install-the-cre-package-from-github">Install the CRE package from GitHub:<a class="anchor" aria-label="anchor" href="#install-the-cre-package-from-github"></a>
</h4>
<p>In R, run:</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span></code></pre>
<pre><code><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"fasrc/CRE"</span><span class="op">)</span></code></pre>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fasrc/CRE">CRE</a></span><span class="op">)</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level4">
<h4 id="users-need-to-call-only-one-function-in-the-cre-package-to-conduct-subgroup-analysis-cre-">Users need to call only one function in the CRE package to conduct
subgroup analysis: <code>cre()</code>.<a class="anchor" aria-label="anchor" href="#users-need-to-call-only-one-function-in-the-cre-package-to-conduct-subgroup-analysis-cre-"></a>
</h4>
<p>The <code><a href="../reference/cre.html">cre()</a></code> inputs asked from the user are as follows:</p>
<ul>
<li>
<code>y</code> the observed response vector</li>
<li>
<code>z</code> the treatment vector</li>
<li>
<code>X</code> the features matrix</li>
<li>
<code>ratio_dis</code> the ratio of data for discovery
subsample</li>
<li>
<code>ite_method_dis</code> the method to estimate the discovery
sample ITE (1)</li>
<li>
<code>include_ps_dis</code> whether to include the propensity score
estimate in the discovery ITE estimation (2)</li>
<li>
<code>ps_method_dis</code> the estimation model for the propensity
score on the discovery subsample</li>
<li>
<code>or_method_dis</code> or_method_dis the estimation model for
the outcome regressions in <code>estimate_ite_aipw</code> on the
discovery subsample</li>
<li>
<code>ite_method_inf</code> the method to estimate the inference
sample ITE (1)</li>
<li>
<code>include_ps_inf</code> whether to include the propensity score
estimate in the inference ITE estimation (2)</li>
<li>
<code>ps_method_inf</code> the estimation model for the propensity
score on the inference subsample</li>
<li>
<code>or_method_inf</code> or_method_dis the estimation model for
the outcome regressions in <code>estimate_ite_aipw</code> on the
inference subsample</li>
<li>
<code>ntrees_rf</code> the number of decision trees for random
forests</li>
<li>
<code>ntrees_gbm</code> the number of decision trees for gradient
boosting</li>
<li>
<code>min_nodes</code> the minimum size of the trees’ terminal
nodes</li>
<li>
<code>max_nodes</code> the maximum size of the trees’ terminal
nodes</li>
<li>
<code>t</code> the common support used in generating the causal
rules matrix</li>
<li>
<code>q</code> the selection threshold used in selecting the causal
rules</li>
<li>
<code>rules_method</code> the method for selecting causal rules with
binary outcomes, either “conservative”, “anticonservative”, or NA (if
continuous)</li>
<li>
<code>include_offset</code> whether or not to include an offset when
estimating the ITE, for poisson only</li>
<li>
<code>offset_name</code> the name of the offset, if it is to be
included</li>
<li>
<code>cate_method</code> the method to estimate the CATE values</li>
<li>
<code>cate_SL_library</code> the library used if
<code>cate_method</code> is set to <code>DRLearner</code>
</li>
<li>
<code>filter_cate</code> whether or not to filter rules with p-value
&lt;= 0.05</li>
</ul>
</div>
<div class="section level4">
<h4 id="a-note-on-the-parameters">A note on the parameters<a class="anchor" aria-label="anchor" href="#a-note-on-the-parameters"></a>
</h4>
<p><strong>(1)</strong> Options for the ITE estimation are as
follows:</p>
<ul>
<li>Inverse Propensity Weighting (<code>ipw</code>)</li>
<li>Stabilized Inverse Propensity Weighting (<code>sipw</code>)</li>
<li>Augmented Inverse Propensity Weighting (<code>aipw</code>)</li>
<li>Outcome Regression (<code>or</code>)</li>
<li>Bayesian Additive Regression Trees (<code>bart</code>)</li>
<li>Accelerated Bayesian Additive Regression Trees
(<code>xbart</code>)</li>
<li>Bayesian Causal Forests (<code>bcf</code>)</li>
<li>Accelerated Bayesian Causal Forests (<code>xbcf</code>)</li>
<li>Causal Forests (<code>cf</code>)</li>
<li>Poisson Regression (<code>poisson</code>)</li>
</ul>
<p>In the original paper by Lee et al. (2020), several methods are
tested for the imputation of the ITE for continuous outcomes and the
consequent ability to correctly discover the causal rules and precisely
estimate the conditional effects within the rules. We refer to this
paper for more details on which are the best performing techniques.</p>
<p>For data with <strong>continuous</strong> outcomes, as a rule of
thumb, we suggest the usage of <code>bcf</code>, as it has shown the
most consistent performance across different simulated scenarios.</p>
<p>For data with <strong>binary</strong> outcomes, we suggest using
<code>or</code>, <code>bart</code>, <code>xbart</code> or
<code>cf</code>. The <code>ipw</code>, <code>sipw</code>,
<code>bcf</code>, and <code>xbcf</code> ITE estimation methods are
<strong>NOT</strong> compatible with binary outcomes.</p>
<p><strong>(2)</strong> The <code>include_ps_dis</code> and
<code>include_ps_inf</code> arguments will only be considered if the ITE
method selected is <code>bart</code>, <code>xbart</code>, or
<code>cf</code>.</p>
</div>
<div class="section level4">
<h4 id="cre-example">CRE Example:<a class="anchor" aria-label="anchor" href="#cre-example"></a>
</h4>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fasrc/CRE">CRE</a></span><span class="op">)</span></code></pre>
<pre><code># expected output: matrix of CATE estimates
cre_results &lt;- cre(y = abs(dataset_cont[["y"]]), z = dataset_cont[["z"]],
                   X = as.data.frame(dataset_cont[["X"]]), ratio_dis 0.25,
                   ite_method_dis = "bcf", include_ps_dis = NA,
                   ps_method_dis = "SL.xgboost", or_method_dis = NA,
                   ite_method_inf = "bcf, include_ps_inf = NA,
                   ps_method_inf = "SL.xgboost", or_method_dis = NA,
                   ntrees_rf = 100, ntrees_gbm = 50, min_nodes = 20,
                   max_nodes = 5, t = 0.025, q = 0.8, rules_method = NA,
                   include_offset = FALSE, offset_name = NA,
                   cate_method = "cf-means", cate_SL_library = NA,
                   filter_cate = FALSE)</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="testing-the-package-examples-and-discussion">Testing the Package, Examples, and Discussion<a class="anchor" aria-label="anchor" href="#testing-the-package-examples-and-discussion"></a>
</h2>
<div class="section level4">
<h4 id="running-examples">Running Examples<a class="anchor" aria-label="anchor" href="#running-examples"></a>
</h4>
<p>You can use any causal inference studies data to test the package.
The database needs to have the following attributes:</p>
<ul>
<li>
<code>y</code>: Output vector</li>
<li>
<code>z</code>: Treatment vector</li>
<li>
<code>X</code>: Covariate matrix</li>
</ul>
<p>The CRE package can generate synthetic data that can be used to test
different features of the package. At the current implementation, the
code can generate data with continuous or binary outcomes. In the
following, we present some reproducible examples that you can copy and
build upon.</p>
</div>
<div class="section level4">
<h4 id="generating-synthetic-data-with-continuous-outcomes">Generating Synthetic Data with Continuous Outcomes<a class="anchor" aria-label="anchor" href="#generating-synthetic-data-with-continuous-outcomes"></a>
</h4>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/fasrc/CRE">"CRE"</a></span><span class="op">)</span></code></pre>
<pre><code><span class="va">dataset_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_cre_dataset.html">generate_cre_dataset</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1000</span>, rho <span class="op">=</span> <span class="fl">0</span>, n_rules <span class="op">=</span> <span class="fl">2</span>, p <span class="op">=</span> <span class="fl">10</span>,
                                     effect_size <span class="op">=</span> <span class="fl">0.5</span>, binary <span class="op">=</span> <span class="cn">FALSE</span>, seed <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">dataset_cont</span><span class="op">)</span>
<span class="co">## List of 3</span>
<span class="co"># $ y: num [1:1000] 2.72 2.79 3.2 2.53 2.49 ...</span>
<span class="co"># $ z: int [1:1000] 0 0 1 1 1 1 0 1 0 0 ...</span>
<span class="co"># $ X: num [1:1000, 1:10] 1 1 1 0 0 0 0 1 1 0 ...</span>
<span class="co">#  ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#  .. ..$ : NULL</span>
<span class="co">#  .. ..$ : chr [1:10] "X1" "X2" "X3" "X4" ...</span></code></pre>
</div>
<div class="section level4">
<h4 id="generating-synthetic-data-with-binary-outcomes">Generating Synthetic Data with Binary Outcomes<a class="anchor" aria-label="anchor" href="#generating-synthetic-data-with-binary-outcomes"></a>
</h4>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/fasrc/CRE">"CRE"</a></span><span class="op">)</span></code></pre>
<pre><code><span class="va">dataset_binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_cre_dataset.html">generate_cre_dataset</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1000</span>, rho <span class="op">=</span> <span class="fl">0</span>, n_rules <span class="op">=</span> <span class="fl">2</span>, p <span class="op">=</span> <span class="fl">10</span>,
                                       effect_size <span class="op">=</span> <span class="fl">0.5</span>, binary <span class="op">=</span> <span class="cn">TRUE</span>, seed <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">dataset_binary</span><span class="op">)</span>
<span class="co">## List of 3</span>
<span class="co"># $ y: num [1:1000] 1 0.5 0 0 1.5 1 1 1 -0.5 0 ...</span>
<span class="co"># $ z: int [1:1000] 0 1 0 0 1 0 0 0 1 0 ...</span>
<span class="co"># $ X: num [1:1000, 1:10] 1 1 1 0 0 0 0 1 1 0 ...</span>
<span class="co">#  ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#  .. ..$ : NULL</span>
<span class="co">#  .. ..$ : chr [1:10] "X1" "X2" "X3" "X4" ...</span></code></pre>
</div>
<div class="section level4">
<h4 id="running-the-cre-on-synthetic-data-with-continuous-outcomes">Running the CRE on Synthetic Data with Continuous Outcomes<a class="anchor" aria-label="anchor" href="#running-the-cre-on-synthetic-data-with-continuous-outcomes"></a>
</h4>
<p>In the following example, we first generate 1000 synthetic data
samples, then we feed them into the <code><a href="../reference/cre.html">cre()</a></code> function to
generate select causal rules and CATE estimates. You can read more about
different arguments in the documentation (<code><a href="../reference/cre.html">?cre</a></code>). In
summary:</p>
<ul>
<li>We want to run a code delegating 25% of the data for the discovery
subsample and 75% for inference (<code>ratio_dis &lt;- 0.25</code>)</li>
<li>For the discovery subsample, we want to estimate the Individual
Treatment effect using the XBART method, including the estimated
propensity score as a covariate
(<code>ite_method_dis &lt;- "xbart"</code> and
<code>include_ps_dis &lt;- TRUE</code>)</li>
<li>For the inference subsample, we want to estimate the Individual
Treatment effect using the XBCF method, which automatically includes the
estimated propensity score as a covariate
(<code>ite_method_inf &lt;- "xbcf"</code> and
<code>include_ps_inf &lt;- NA</code>)</li>
<li>For the causal rule generation, we want to generate 100 decision
trees with a minimum node size of 20 and a maximum node size of 5
(<code>ntrees &lt;- 100</code>, <code>min_nodes &lt;- 20</code>, and
<code>max_nodes &lt;- 5</code>)</li>
<li>For trimming the causal rules, we want to use a common support value
of 0.025 (<code>t &lt;- 0.025</code>)</li>
<li>For selecting the most important causal rules, we want to use a
selection threshold of 0.8 (<code>q &lt;- 0.08</code>)</li>
<li>Since we’re not using binary outcomes in the first example, we will
not specify a rules method (<code>rules_method &lt;- NA</code>)</li>
<li>Since we’re not using Poisson regression, we will not specify an
offset (<code>include_offset &lt;- FALSE</code>,
<code>offset_name = NA</code>)</li>
</ul>
<pre><code><span class="co"># Load package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/fasrc/CRE">"CRE"</a></span><span class="op">)</span></code></pre>
<pre><code># Generate synthetic data with continuous outcomes
dataset &lt;- generate_cre_dataset(n = 1000, rho = 0, n_rules = 2, p = 10
                                effect_size = 0.5, binary = FALSE, seed = 2021) 

# Set parameters
y &lt;- dataset[["y"]]
z &lt;- dataset[["z"]]
X &lt;- dataset[["X"]]
ratio_dis &lt;- 0.25
ite_method_dis &lt;- "bcf"
include_ps_dis &lt;- "TRUE"
ps_method_dis &lt;- "SL.xgboost"
or_method_dis &lt;- NA
ite_method_inf &lt;- "bcf"
include_ps_inf &lt;- NA
ps_method_inf &lt;- "SL.xgboost"
or_method_inf &lt;- NA
ntrees &lt;- 100
min_nodes &lt;- 20
max_nodes &lt;- 5
t &lt;- 0.025
q &lt;- 0.8
rules_method &lt;- NA
include_offset &lt;- FALSE
offset_name &lt;- NA
cate_method &lt;- "cf-means"
cate_SL_library &lt;- NA
filter_cate &lt;- FALSE

# Run CRE method
cre_results &lt;- cre(y, z, X, ratio_dis, ite_method_dis, include_ps_dis,
                   ps_method_dis, or_method_dis, ite_method_inf, include_ps_inf, 
                   ps_method_inf, or_method_inf, ntrees, min_nodes, max_nodes, 
                   t, q, rules_method, include_offset, offset_name,
                   cate_method, cate_SL_library, filter_cate)</code></pre>
</div>
<div class="section level4">
<h4 id="running-the-cre-on-synthetic-data-with-binary-outcomes">Running the CRE on Synthetic Data with Binary Outcomes<a class="anchor" aria-label="anchor" href="#running-the-cre-on-synthetic-data-with-binary-outcomes"></a>
</h4>
<p>To run the CRE method on synthetic data with binary outcomes, set the
<code>binary</code> argument in <code>generate_cre_dataset</code> to
TRUE, and specify the <code>rules_method</code> parameter. In addition,
make sure the ITE estimation methods selected are compatible with binary
outcomes (see above).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Naeem Khoshnevis, Falco Joannes Bargagli Stoffi, Daniela
Maria Garcia, Kwonsang Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
